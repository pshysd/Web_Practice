<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style>
    .outer {
        background-color : black;
        color : white;
        width : 1000px;
        margin : auto;
        margin-top : 50px;
    }

    #mypage-form>table { margin : auto; }
    #mypage-form input { margin : 5px; }
</style>
</head>
<body>

	<%@ include file="../common/menubar.jsp" %>
	
	<%
		// 현재 로그인한 사용자의 정보를 자바 변수로 담기
		// => 아이디, 이름, 휴대폰, 이메일, 주소, 관심분야
		String userId = loginUser.getUserId();
		String userName = loginUser.getUserName();
		// String phone = loginUser.getPhone(); // "010-1111-2222" / null => ""
		String phone = (loginUser.getPhone() == null) ? "" : loginUser.getPhone(); // 삼항연산자
		String email = (loginUser.getEmail() == null) ? "" : loginUser.getEmail();
		String address = (loginUser.getAddress() == null) ? "" : loginUser.getAddress();
		String interest = (loginUser.getInterest() == null) ? "" : loginUser.getInterest(); // "운동, 등산"
		
	%>
    
    <div class="outer">

        <br>
        <h2 align="center">마이페이지</h2>

		<!-- 
			현재 나의 주소 : http://localhost:8888/jsp/myPage.me
			내가 요청을 보내고자 하는 주소 : http://localhost:8888/jsp/update.me
			
			절대경로 : /jsp/update.me
			상대경로 : update.me
		-->
        <form id="mypage-form" action="" method="post">

                <!-- 아이디, 비밀번호, (비밀번호확인), 전화번호, 이메일, 주소, 취미 -->
                <table>
                    <!-- (tr>td*3)*8 + Enter -->
                    <tr>
                        <td>* 아이디</td>
                        <td><input type="text" name="userId" maxlength="12" required value="<%= userId %>" readonly></td>
                        <!-- 아이디의 수정을 막기 위해 readonly 속성을 부여 -->
                        <td></td>
                    </tr>
                    <tr>
                        <td>* 이름</td>
                        <td><input type="text" name="userName" maxlength="6" required value="<%= userName %>"></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>&nbsp;&nbsp;전화번호</td>
                        <td><input type="text" name="phone" placeholder="- 포함해서 입력" value="<%= phone %>"></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>&nbsp;&nbsp;이메일</td>
                        <td><input type="email" name="email" value="<%= email %>"></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>&nbsp;&nbsp;주소</td>
                        <td><input type="text" name="address" value="<%= address %>"></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>&nbsp;&nbsp;관심분야</td>
                        <td colspan="2">
                            <!-- (input[type=checkbox name=interest id= value=]+label)*6 + Enter -->
                            <input type="checkbox" name="interest" id="sports" value="운동">
                            <label for="sports">운동</label>
                            <input type="checkbox" name="interest" id="hiking" value="등산">
                            <label for="hiking">등산</label>
                            <input type="checkbox" name="interest" id="fishing" value="낚시">
                            <label for="fishing">낚시</label> 
                            <br>
                            <input type="checkbox" name="interest" id="cooking" value="요리">
                            <label for="cooking">요리</label>
                            <input type="checkbox" name="interest" id="game" value="게임">
                            <label for="game">게임</label>
                            <input type="checkbox" name="interest" id="movie" value="영화">
                            <label for="movie">영화</label>
                        </td>
                    </tr>
                </table>
                
                <script>
                	$(function() {
                		
                		var interest = "<%= interest %>"; // "" / "운동, 등산"
                		
                		// [input, input, .., input]
                		$("input[type=checkbox]").each(function() {
                			
                			// 순차적으로 접근한 input 요소의 value 속성값이
                			// interest 라는 변수에 포함되었을 경우
                			// => 해당 input 요소에 checked 속성 부여
                			if(interest.search($(this).val()) != -1) { // 포함됬다면
                				// interest 라는 문자열로부터 현재 체크박스의 value 속성이
                				// 포함되지 않으면 -1 을 반환
                				
                				// 해당 요소에 checked 속성 부여
                				$(this).attr("checked", true);
                			}
                		});
                	});
                </script>

                <br><br>

                <div align="center">
                    <button type="submit" class="btn btn-secondary btn-sm">정보변경</button>
                    <button type="button" class="btn btn-warning btn-sm">비밀번호변경</button>
                    <button type="button" class="btn btn-danger btn-sm">회원탈퇴</button>
                </div>

                <br><br>
        </form>
    </div>

</body>
</html>